---
import type * as interfaces from 'lib/interfaces'
import { isTweetURL } from 'lib/blog-helpers'
import Bookmark from './Bookmark.astro'
import TweetEmbed from './TweetEmbed.astro'

export interface Props {
  block: interfaces.Block | any
  urlMap: { [key: string]: string }
}

const { block, urlMap } = Astro.props

let url: URL | any
try {
  url = block.Embed.Url
} catch (err) {
  console.log(err)
}
---

{
  url ? (
    isTweetURL(url) ? (
      <div class="tweet-embed rounded-xl">
        <TweetEmbed url={url} />
      </div>
    ) : (
      <Bookmark block={block} urlMap={urlMap} />
    )
  ) : null
}

<style>
  .tweet-embed {
    width: 100%;
    max-width: 600px;
    margin: auto;
  }
  .tweet-embed div:first-child div:first-child {
    margin: auto;
  }
</style>
